// ------------------------------------------------------------------
// PATIENT MODEL
// ------------------------------------------------------------------
model Patient {
    id String @id @default(cuid())

    // Date Metadata
    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    // Relations
    account          Account?          @relation(fields: [accountId], references: [id], onDelete: Cascade)
    profile          Profile?          @relation(fields: [profileId], references: [id], onDelete: Cascade)
    medicalRecordKey MedicalRecordKey? @relation(fields: [medicalRecordKeyId], references: [id], onDelete: Cascade)
    credit           Credit?
    transactions     Transaction[]

    // Foreign Keys
    accountId          String? @unique
    profileId          String? @unique
    medicalRecordKeyId String? @unique
}

// ------------------------------------------------------------------
// MEDICAL RECORD KEY MODEL
// ------------------------------------------------------------------
model MedicalRecordKey {
    id String @id @default(cuid())

    // Main Fields
    code String @unique
    name String

    // Date Metadata
    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    // Relations
    patient        Patient?
    patientDetail  PatientDetail?
    medicalRecords MedicalRecord[]
}

// ------------------------------------------------------------------
// PATIENT DETAIL MODEL
// ------------------------------------------------------------------
model PatientDetail {
    id String @id @default(cuid())

    // Main Fields
    activityLevel       PatientActivity?
    dailyCalories       Int?
    height              Int?
    weight              Int?
    dietPlan            DietPlan?
    dietGoal            DietGoal?
    dietPlanDescription String?
    bmi                 Float?
    bmiStatus           BmiStatus?

    // Date Metadata
    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    // Relations
    medicalRecordKey MedicalRecordKey? @relation(fields: [medicalRecordKeyId], references: [id], onDelete: Cascade)

    // Foreign Keys
    medicalRecordKeyId String? @unique
}

// ------------------------------------------------------------------
// MEDICAL RECORD MODEL
// ------------------------------------------------------------------
model MedicalRecord {
    id String @id @default(cuid())

    // Main Fields
    height             Int?
    weight             Int?
    bmi                Float?
    bmiStatus          BmiStatus?
    disability         String?
    diagnosis          String?
    allergies          String?
    foodPreferences    String?
    foodAvoidances     String?
    appetite           String?
    diarrhea           Boolean?
    constipation       Boolean?
    vomit              Boolean?
    nausea             Boolean?
    bloating           Boolean?
    swallowingDisorder Boolean?
    chewingDisorder    Boolean?
    suckingDisorder    Boolean?
    notes              String?
    others             String?

    // Date Metadata
    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    // Relations
    medicalRecordKey MedicalRecordKey? @relation(fields: [medicalRecordKeyId], references: [id], onDelete: Cascade)

    // Foreign Keys
    medicalRecordKeyId String?
}
